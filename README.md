# AlphaGenome Streamlit 应用程序

这是一个基于 Streamlit 的网络应用程序，复制了 `colabs/quick_start.ipynb` 笔记本中 AlphaGenome 工具的所有核心功能。该应用程序提供了一个直观的用户界面，用于执行基因组DNA序列分析、变异效应预测和可视化。

## 功能特性

### 🧬 核心分析功能
- **DNA序列预测**: 输入DNA序列获取多种类型的预测结果
- **基因组区间预测**: 基于基因符号或基因组坐标进行分析
- **变异效应分析**: 分析遗传变异对基因表达的影响
- **变异评分**: 使用推荐评分器对变异进行量化评分
- **原位诱变分析 (ISM)**: 系统性突变分析识别功能重要区域

### 📊 数据处理与可视化
- 交互式图表和可视化
- 实时预测结果展示
- 数据导出功能（CSV格式）
- 基因注释信息显示
- 多轨道数据同时分析

### 🔧 用户界面特性
- 直观的参数配置界面
- 实时错误检查和验证
- 进度指示器
- 响应式设计
- 中文界面支持

## 安装要求

### 系统要求
- Python 3.10 或更高版本
- 8GB 以上内存（推荐16GB）
- 稳定的网络连接（用于API调用）

### 依赖包安装

```bash
# 克隆或下载项目文件
# 安装依赖包
pip install -r requirements.txt
```

### AlphaGenome API 密钥
您需要有效的 AlphaGenome API 密钥才能使用此应用程序。请访问 [AlphaGenome 官方网站](https://www.alphagenomedocs.com/) 获取API密钥。

## 使用方法

### 启动应用程序

```bash
streamlit run streamlit_app.py
```

应用程序将在浏览器中自动打开，通常地址为 `http://localhost:8501`

### 基本配置

1. **API密钥配置**
   - 在左侧边栏输入您的 AlphaGenome API 密钥
   - 密钥验证成功后方可继续使用

2. **选择分析功能**
   - 使用顶部标签页选择所需的分析类型
   - 每个标签页对应不同的分析功能

## 详细功能说明

### 🧬 DNA序列预测
- **输入**: DNA序列（如 "GATTACA"）
- **配置**: 选择序列长度、输出类型、组织类型、物种
- **输出**: 预测值、轨道元数据、可视化图表
- **支持的输出类型**: DNASE, CAGE, RNA_SEQ, HISTONE_H3K4ME3, HISTONE_H3K27AC

### 🗺️ 基因组区间预测
- **输入方式**: 
  - 基因符号（如 "CYP2B6"）
  - 基因组坐标（染色体、起始和结束位置）
- **功能**: 自动加载基因注释、区间调整、多轨道预测
- **可视化**: 基因结构图、预测轨道图

### 🔬 变异效应分析
- **输入**: 变异信息（染色体、位置、参考碱基、变异碱基）
- **分析**: REF vs ALT 比较、差异计算
- **可视化**: 对比图表、效应图、统计汇总

### 📊 变异评分
- **功能**: 使用推荐的变异评分器进行量化分析
- **输出**: 基因水平评分、轨道水平评分、统计汇总
- **可视化**: 评分分布图、热图、排序表

### 🔍 原位诱变分析 (ISM)
- **功能**: 系统性突变分析识别关键功能位置
- **配置**: 可调整分析区间、评分参数
- **输出**: 贡献评分矩阵、序列logo、关键位置识别
- **注意**: 计算量较大，建议使用较短序列

## 性能优化建议

### 对于大规模分析
- 使用较短的序列长度以加快处理速度
- 限制同时分析的轨道数量
- 考虑分批处理大量变异

### 内存使用优化
- ISM分析：使用较小的分析窗口
- 基因组区间：选择合适的序列长度
- 避免同时打开多个分析标签页

## 数据导出

### 支持的导出格式
- **CSV**: 所有预测数据和评分结果
- **图表**: 可通过浏览器保存为PNG/SVG格式

### 导出内容
- 原始预测值
- 轨道元数据
- 变异评分
- ISM分析结果
- 基因注释信息

## 故障排除

### 常见问题

1. **API密钥错误**
   - 确认密钥正确性
   - 检查网络连接
   - 确认账户权限

2. **内存不足**
   - 减少序列长度
   - 关闭其他应用程序
   - 重启应用程序

3. **分析速度慢**
   - 检查网络连接
   - 减少分析参数
   - 使用推荐的序列长度

4. **可视化问题**
   - 刷新浏览器页面
   - 检查数据完整性
   - 尝试减少显示的轨道数量

### 日志和调试
- 错误信息会在界面中直接显示
- 查看浏览器控制台获取详细错误信息
- 检查终端输出获取后端错误

## 技术规格

### 支持的数据格式
- **输入**: DNA序列（FASTA格式）、基因组坐标（BED格式）
- **输出**: CSV、JSON、图像文件

### API兼容性
- 与 AlphaGenome API v1.0+ 兼容
- 支持人类（hg38）和小鼠（mm10）基因组
- 支持多种组织类型和细胞系

### 浏览器兼容性
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

## 更新和维护

### 检查更新
```bash
pip install --upgrade alphagenome streamlit
```

### 配置更新
- 定期检查 AlphaGenome API 的更新
- 更新组织类型ontology terms
- 更新基因注释数据

## 支持和反馈

如果您遇到问题或有改进建议，请：
1. 检查本README的故障排除部分
2. 查看 [AlphaGenome 官方文档](https://www.alphagenomedocs.com/)
3. 提交问题到项目仓库

## 许可证

本项目遵循与原始 AlphaGenome 项目相同的许可证条款。请参阅 LICENSE 文件了解详细信息。

## 更新日志

### v1.0.0
- 初始版本发布
- 包含所有核心功能
- 支持中文界面
- 完整的可视化功能

---

**注意**: 此应用程序需要有效的 AlphaGenome API 密钥才能正常工作。请确保您已获得适当的访问权限。 